@{
  ViewData["Title"] = "Productos";
}

<link rel="stylesheet" href="~/css/productos.css" asp-append-version="true" />

<div class="text-center">
  <h1 class="display-4">Productos</h1>
</div>

<div class="filter">
  <label for="BuscarMarcas" class="form-label titulo"></label>
                @Html.DropDownList("BuscarMarcas", null, htmlAttributes: new
                  {
                    @class = " form-control input-filter ",
                    onchange="ListadoProductos()"
                  })
  <label for="BuscarSubRubros" class="form-label titulo"></label>
                @Html.DropDownList("BuscarSubRubros", null, htmlAttributes: new
                  {
                    @class = " form-control input-filter ",
                    onchange="ListadoProductos()"
                  })
</div>


<!-- Modal -->
<div class="modal fade" id="productoModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="tituloModal">Nuevo Producto</h5>
      </div>
      <div class="modal-body">
        <form>
          <input type="hidden" id="ProductoID" value="0">

          <label for="MarcaID" class="form-label">Marca</label>
          @Html.DropDownList("MarcaID", null, htmlAttributes: new { @class = "form-control" })
          <span id="errorMensajeMarca" style="color:red; display:none; font-size: 15px; padding-left: 4px;">
            <i class="fa-solid fa-circle-exclamation pe-1"></i>Debe seleccionar una marca
          </span>

          <label for="SubRubroID" class="form-label">Subrubro</label>
          @Html.DropDownList("SubRubroID", null, htmlAttributes: new { @class = "form-control" })
          <span id="errorMensajeSubRubro" style="color:red; display:none; font-size: 15px; padding-left: 4px;">
            <i class="fa-solid fa-circle-exclamation pe-1"></i>Debe seleccionar un subrubro
          </span>

          <label for="NombreProducto" class="form-label">Nombre</label>
          <input type="text" id="NombreProducto" class="form-control" oninput="textoMayuscula(this)">
          <!--llama a la funcion que convierte lo que escribo en los input a mayuscula-->
          <span id="errorMensajeNombreProducto" style="color:red; display:none; font-size: 15px; padding-left: 4px;">
            <i class="fa-solid fa-circle-exclamation pe-1"></i>Debe ingresar un nombre
          </span>

          <label for="Descripcion" class="form-label">Descripcion</label>
          <input type="text" id="Descripcion" class="form-control" oninput="textoMayuscula(this)">
          <span id="errorMensajeDescripcion" style="color:red; display:none; font-size: 15px; padding-left: 4px;">
            <i class="fa-solid fa-circle-exclamation pe-1"></i>Debe ingresar una descripcion
          </span>

          <label for="Precio" class="form-label">Precio</label>
          <input type="number" id="Precio" class="form-control">
          <span id="errorMensajePrecio" style="color:red; display:none; font-size: 15px; padding-left: 4px;">
            <i class="fa-solid fa-circle-exclamation pe-1"></i>Debe ingresar un precio
          </span>

        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn-ovalo ancho-boton" data-bs-dismiss="modal"
          onclick="LimpiarModal()">Cerrar</button>
        <button type="button" class="btn-ovalo ancho-boton" onclick="GuardarProducto()">Guardar</button>
      </div>
    </div>
  </div>
</div>

<table class="table table-light table-hover">
  <thead>
    <tr>
      <th>Producto</th>
      <th>Descripcion</th>
      <th>Precio</th>
      <th>SubRubro</th>
      <th>Marca</th>
    </tr>
  </thead>
  <tbody id="tbody-productos"></tbody>
</table>

<!--Boton para agregar nuevo producto-->
<div class="d-flex justify-content-end align-items-center bd-highlight mb-2 fixed-bottom div-boton ">
  <div class="p-2 bd-highlight d-flex "><button type="submit" class="btn btn-primary mt-3 botonProducto"
      data-bs-toggle="modal" data-bs-target="#productoModal"><i class="fa-solid fa-plus">add</i></button>
  </div>
</div>

@section Scripts {
  <script src="~/js/productos-1.0.0.js"></script>
}

